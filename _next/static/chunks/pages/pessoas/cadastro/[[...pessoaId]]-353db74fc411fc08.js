(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[316],{8781:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pessoas/cadastro/[[...pessoaId]]",function(){return t(2606)}])},4101:function(e,n,t){"use strict";t.d(n,{Z:function(){return G}});var r=t(7297),o=t(5893),i=t(253),l=t(282),u=t(7536),s=t(9521),a=t(2318),c=t(6050),d=t(9432),f=t(7397),p=t(7083),m=t(7702),h=t(553),x=t(5625),Z=t(5432),v=t(8041),b=t(4486);let j={required:"Campo obrigat\xf3rio.",invalidDate:"Formato de data inv\xe1lido.",maxDate:"A data n\xe3o deve exceder a data m\xe1xima."};function g(){let e=(0,r.Z)(["\n  margin-bottom: 1.5rem;\n"]);return g=function(){return e},e}function w(){let e=(0,r.Z)(["\n  width: 100%;\n"]);return w=function(){return e},e}function P(){let e=(0,r.Z)(["\n  width: 100%;\n\n  .MuiInputAdornment-root {\n    display: none;\n  }\n"]);return P=function(){return e},e}function C(){let e=(0,r.Z)(["\n  color: rgba(0, 0, 0, 0.4);\n"]);return C=function(){return e},e}let I=(0,s.ZP)(i.Z).withConfig({componentId:"sc-c6208d8c-0"})(g()),y=(0,s.ZP)(d.Z).withConfig({componentId:"sc-c6208d8c-1"})(w()),S=(0,s.ZP)(v.e).withConfig({componentId:"sc-c6208d8c-2"})(P()),_=(0,s.ZP)(Z.Z).withConfig({componentId:"sc-c6208d8c-3"})(C()),D=e=>{let{field:{property:n,label:t,description:r,type:i,options:l,rules:s,inputConfig:a,dateConfig:c,disabled:d},control:Z,className:v}=e,g=t+((null==s?void 0:s.required)?" *":""),w=e=>e&&(e.message||j[e.type])||null,P=()=>r?(0,o.jsx)(f.Z,{position:"end",children:(0,o.jsx)(p.ZP,{title:r||"",children:(0,o.jsx)(_,{fontSize:"small"})})}):null,C=e=>{let{field:n,fieldState:{error:t}}=e,r=i===b.f.number?"number":"text";return(0,o.jsx)(y,{...n,label:g,type:r,variant:"outlined",error:!!t,helperText:w(t),disabled:!0===d,inputProps:{maxLength:null==a?void 0:a.maxLength},InputProps:{endAdornment:P()}})},D=e=>{let{field:n,fieldState:{error:t}}=e,r=i===b.f.selectMultiple;return(0,o.jsx)(y,{...n,label:g,variant:"outlined",error:!!t,helperText:w(t),SelectProps:{multiple:r},select:!0,children:null==l?void 0:l.map(e=>(0,o.jsx)(m.Z,{value:e.value,children:e.label},e.value))})},E=e=>{let{field:n}=e;return(0,o.jsx)(S,{...n,label:g,format:"DD/MM/YYYY",inputVariant:"outlined",invalidDateMessage:j.invalidDate,maxDateMessage:j.maxDate,disableFuture:(null==c?void 0:c.disableFuture)||!1,disabled:d})},M=e=>{let{field:n}=e;return(0,o.jsx)(h.Z,{control:(0,o.jsx)(x.Z,{...n,color:"primary",checked:(null==n?void 0:n.value)===!0}),label:g})},N=()=>{switch(i){case b.f.boolean:return M;case b.f.select:case b.f.selectMultiple:return D;case b.f.date:return E;case b.f.number:case b.f.input:default:return C}};return(0,o.jsx)(I,{className:v,children:(0,o.jsx)(u.Qr,{name:n,control:Z,rules:s,render:e=>{let{field:n,fieldState:t}=e;return N()({field:n,fieldState:t})}})})};function E(){let e=(0,r.Z)(["\n  margin-bottom: 1rem;\n"]);return E=function(){return e},e}function M(){let e=(0,r.Z)(["\n  && {\n    margin-bottom: 2rem;\n  }\n"]);return M=function(){return e},e}let N=(0,s.ZP)(c.Z).withConfig({componentId:"sc-9d76d6d3-0"})(E()),k=(0,s.ZP)(a.Z).withConfig({componentId:"sc-9d76d6d3-1"})(M()),F=e=>{let{section:{label:n,fields:t},control:r,className:i}=e;return(0,o.jsxs)(N,{className:i,children:[(0,o.jsx)(k,{variant:"h4",children:n}),t.map(e=>(0,o.jsx)(D,{field:e,control:r},e.property))]})};var T=t(2425),q=t(7294);function z(){let e=(0,r.Z)([""]);return z=function(){return e},e}function Y(){let e=(0,r.Z)(["\n  width: 100%;\n"]);return Y=function(){return e},e}function A(){let e=(0,r.Z)(["\n  display: flex;\n  justify-content: flex-end;\n  padding: 2rem 0 3rem;\n"]);return A=function(){return e},e}function L(){let e=(0,r.Z)(["\n  width: 200px;\n"]);return L=function(){return e},e}let O=(0,s.ZP)(i.Z).withConfig({componentId:"sc-55e3eb2e-0"})(z()),R=s.ZP.form.withConfig({componentId:"sc-55e3eb2e-1"})(Y()),V=(0,s.ZP)(i.Z).withConfig({componentId:"sc-55e3eb2e-2"})(A()),B=(0,s.ZP)(l.Z).withConfig({componentId:"sc-55e3eb2e-3"})(L()),X=e=>{let{form:n,onSubmit:t,className:r}=e,{enqueueSnackbar:i}=(0,T.Ds)(),[l,s]=(0,q.useState)(!1),{control:a,handleSubmit:c}=(0,u.cI)({mode:"onSubmit",defaultValues:function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],t={},r=n=>{if(e&&null!==n.value)return n.value;switch(n.type){case b.f.boolean:return!1;case b.f.selectMultiple:return[];case b.f.select:case b.f.input:case b.f.number:return"";default:return null}};return n.sections.forEach(e=>{e.fields.forEach(e=>{t[e.property]=r(e)})}),t}()}),d=()=>f("Verifique os dados e tente novamente.","error"),f=(e,n)=>i(e,{variant:n}),p=e=>{if(l)return null;s(!0),t(e).then(e=>{e&&f(e,"success")}).catch(e=>{e&&f(e,"error")}).finally(()=>{s(!1)})};return(0,o.jsx)(O,{className:r,children:(0,o.jsxs)(R,{onSubmit:c(p,d),children:[n.sections.map(e=>(0,o.jsx)(F,{section:e,control:a},e.label)),(0,o.jsx)(V,{children:(0,o.jsx)(B,{id:"saveButton",variant:"contained",color:"primary",type:"submit",disabled:l,children:l?"Salvando...":"Salvar"})})]})})};var G=X},2606:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return I}});var r=t(5893),o=t(370),i=t(7297),l=t(8757),u=t(3832),s=t(880),a=t(7294),c=t(9521),d=t(4101),f=t(475),p=t(8183),m=t(7083),h=t(1568);function x(){let e=(0,i.Z)(["\n  width: 60px;\n  height: 60px;\n  position: fixed;\n  bottom: 140px;\n  right: 30px;\n  border-radius: 50%;\n  background-color: #80f49d;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]);return x=function(){return e},e}let Z=c.ZP.a.withConfig({componentId:"sc-c771dc9e-0"})(x()),v=e=>{let{idGoTo:n,tooltipLabel:t}=e;return t?(0,r.jsx)(m.ZP,{title:t,arrow:!0,children:(0,r.jsx)(Z,{href:n,children:(0,r.jsx)(h.Z,{htmlColor:"white",fontSize:"large"})})}):(0,r.jsx)(Z,{href:n,children:(0,r.jsx)(h.Z,{htmlColor:"white",fontSize:"large"})})};function b(){let e=(0,i.Z)(["\n  && {\n    max-width: 600px;\n  }\n"]);return b=function(){return e},e}let j=(0,c.ZP)(u.Z).withConfig({componentId:"sc-b07904ee-0"})(b()),g=e=>{let{userId:n,personInformation:t,form:o}=e,i=(0,s.useRouter)(),[u,c]=(0,a.useState)({open:!1,person:null}),m=async e=>new Promise((r,o)=>{l.Z.savePerson(e,n,t).then(e=>{if((null==t?void 0:t.person.id)!==null){var n;i.replace("/pessoas"),h(null===(n=e.person)||void 0===n?void 0:n.card_number),r("Cadastro atualizado com sucesso!")}else x(e),r(null)}).catch(()=>{o("Ocorreu um erro. Tente novamente.")})}),h=e=>i.replace("/pessoas?q=".concat(e)),x=e=>c({open:!0,person:e}),Z=()=>{var e;c({...u,open:!1}),h((null===(e=u.person)||void 0===e?void 0:e.person.card_number)||"")};return(0,r.jsxs)(j,{children:[(0,r.jsx)(f.Z,{title:"Cadastro de Pessoa"}),o&&(0,r.jsx)(d.Z,{form:o,onSubmit:m}),(0,r.jsx)(p.Z,{...u,handleClose:Z,newPerson:!0}),(0,r.jsx)(v,{idGoTo:"#saveButton",tooltipLabel:"Finalizar formul\xe1rio"})]})};var w=t(1872),P=t(1163);let C=()=>{var e;let[n,t]=(0,a.useState)(null),[i,u]=(0,a.useState)(),s=(0,P.useRouter)(),{userProfile:c}=(0,w.F_)();return(0,a.useEffect)(()=>{let{pessoaId:e}=s.query,n=e?+e[0]:null;l.Z.getPersonForm(n,c).then(e=>{t({sections:e.sections}),u(e.personCompleteData)})},[]),(0,r.jsx)(o.Z,{title:"Cadastro - Canto da Rua",children:(0,r.jsx)(g,{form:n,personInformation:i,userId:null!==(e=null==c?void 0:c.id)&&void 0!==e?e:0})})};var I=C},1163:function(e,n,t){e.exports=t(880)}},function(e){e.O(0,[29,970,465,937,529,874,859,774,888,179],function(){return e(e.s=8781)}),_N_E=e.O()}]);