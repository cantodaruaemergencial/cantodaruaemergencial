(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[316],{11568:function(e,n,r){"use strict";var t=r(67294),o=r(63786);n.Z=(0,o.Z)(t.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM9.29 16.29L5.7 12.7a.9959.9959 0 010-1.41c.39-.39 1.02-.39 1.41 0L10 14.17l6.88-6.88c.39-.39 1.02-.39 1.41 0 .39.39.39 1.02 0 1.41l-7.59 7.59c-.38.39-1.02.39-1.41 0z"}),"CheckCircleRounded")},60098:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pessoas/cadastro/[[...pessoaId]]",function(){return r(31843)}])},31843:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return y}});var t=r(85893),o=r(40370),u=r(34051),c=r.n(u),a=r(58757),s=r(43832),i=r(80880),f=r(67294),l=r(10063),p=r(4101),d=r(40475),v=r(79932);function h(e,n,r,t,o,u,c){try{var a=e[u](c),s=a.value}catch(i){return void r(i)}a.done?n(s):Promise.resolve(s).then(t,o)}function b(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function m(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){b(e,n,r[n])}))}return e}function w(){var e,n,r=(e=["\n  && {\n    max-width: 600px;\n  }\n"],n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}})));return w=function(){return r},r}var j=(0,l.ZP)(s.Z)(w()),O=function(e){var n=e.personId,r=e.form,o=(0,i.useRouter)(),u=(0,f.useState)({open:!1,person:null}),s=u[0],l=u[1],b=function(){var e,r=(e=c().mark((function e(r){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){a.Z.savePerson(r,n).then((function(r){null!==n?(o.replace("/pessoas"),w(null===r||void 0===r?void 0:r.CardNumber),e("Cadastro atualizado com sucesso!")):(O(r),e(null))})).catch((function(){t("Ocorreu um erro. Tente novamente.")}))})));case 1:case"end":return e.stop()}}),e)})),function(){var n=this,r=arguments;return new Promise((function(t,o){var u=e.apply(n,r);function c(e){h(u,t,o,c,a,"next",e)}function a(e){h(u,t,o,c,a,"throw",e)}c(void 0)}))});return function(e){return r.apply(this,arguments)}}(),w=function(e){return o.replace("/pessoas?q=".concat(e))},O=function(e){return l({open:!0,person:e})};return(0,t.jsxs)(j,{children:[(0,t.jsx)(d.Z,{title:"Cadastro"}),r&&(0,t.jsx)(p.Z,{form:r,onSubmit:b}),(0,t.jsx)(v.Z,m({},s,{handleClose:function(){var e;l(m({},s,{open:!1})),w((null===(e=s.person)||void 0===e?void 0:e.CardNumber)||"")},newPerson:!0}))]})},P=r(11163),y=function(){var e=(0,f.useState)(null),n=e[0],r=e[1],u=(0,f.useState)(),c=u[0],s=u[1],i=(0,P.useRouter)();return(0,f.useEffect)((function(){var e=i.query.pessoaId,n=e?+e[0]:null;a.Z.getPersonForm(n).then((function(e){r(e),s(n)}))}),[]),(0,t.jsx)(o.Z,{title:"Cadastro - Canto da Rua",children:(0,t.jsx)(O,{form:n,personId:c})})}},11163:function(e,n,r){e.exports=r(80880)}},function(e){e.O(0,[685,538,575,945,516,432,115,733,313,774,888,179],(function(){return n=60098,e(e.s=n);var n}));var n=e.O();_N_E=n}]);