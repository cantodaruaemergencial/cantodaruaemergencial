(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[554],{78888:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/servicos/cadastro",function(){return t(51237)}])},51237:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return T}});var r,a=t(34051),o=t.n(a),u=t(85893),i=t(40370),c=t(43832),s=t(10063),l=t(40475),f=t(80880),d=t(67294),p=t(4101),m=t(30381),v=t(14509),b=t(34486);function y(e,n,t,r,a,o,u){try{var i=e[o](u),c=i.value}catch(s){return void t(s)}i.done?n(c):Promise.resolve(c).then(r,a)}function h(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var o=e.apply(n,t);function u(e){y(o,r,a,u,i,"next",e)}function i(e){y(o,r,a,u,i,"throw",e)}u(void 0)}))}}function w(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function g(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){w(e,n,t[n])}))}return e}!function(e){e[e.Lockers=15]="Lockers",e[e.Snack=16]="Snack",e[e.FemaleRestroom=17]="FemaleRestroom",e[e.Nursing=18]="Nursing",e[e.Laundry=19]="Laundry",e[e.FemaleBath=20]="FemaleBath",e[e.MaleRestroom=22]="MaleRestroom",e[e.MaleBath=23]="MaleBath",e[e.Date=0]="Date"}(r||(r={}));var S=function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e)};S.getAttendancesForm=function(){return{sections:[{label:"Atendimentos di\xe1rios",fields:[{label:"Data de refer\xeancia",property:S.AttendanceEnumToString(r.Date),value:null,type:b.f.date,dateConfig:{disableFuture:!0},rules:{required:!0}},{label:"Banheiro Feminino Banho",property:S.AttendanceEnumToString(r.FemaleBath),rules:{required:!0},type:b.f.number},{label:"Banheiro Feminino Sanit\xe1rio",property:S.AttendanceEnumToString(r.FemaleRestroom),rules:{required:!0},type:b.f.number},{label:"Banheiro Masculino Banho",property:S.AttendanceEnumToString(r.MaleBath),rules:{required:!0},type:b.f.number},{label:"Banheiro Masculino Sanit\xe1rio",property:S.AttendanceEnumToString(r.MaleRestroom),rules:{required:!0},type:b.f.number},{label:"Enfermagem",property:S.AttendanceEnumToString(r.Nursing),rules:{required:!0},type:b.f.number},{label:"Guarda Volume",property:S.AttendanceEnumToString(r.Lockers),rules:{required:!0},type:b.f.number},{label:"Lanche",property:S.AttendanceEnumToString(r.Snack),rules:{required:!0},type:b.f.number},{label:"Lavanderia",property:S.AttendanceEnumToString(r.Laundry),rules:{required:!0},type:b.f.number}]}]}},S.AttendanceEnumToString=function(e){return e.toString()},S.createAttendanceObjectToSave=function(e,n,t){return{service:parseInt(n,10),Date:e,Attendances:parseInt(t,10)}},S.saveAttendancesByDay=function(){var e=h(o().mark((function e(n){var t,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g({},n),console.log("body",t),Object.keys(t).forEach((function(e){if((0,m.isMoment)(t[e])){var n=t[e];t[e]=n.format("YYYY-MM-DD")}})),a=[],Object.keys(t).forEach(function(){var e=h(o().mark((function e(n){var u,i,c,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("key",n),n===S.AttendanceEnumToString(r.Date)){e.next=11;break}return u=S.createAttendanceObjectToSave(new Date(t[S.AttendanceEnumToString(r.Date)]),n,t[n]),e.next=5,v.V0.post("service-attendances",u);case 5:if(i=e.sent,c=i.status,s=i.data,a.push(s),200===c){e.next=11;break}throw new Error;case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();var E=S;function A(e,n,t,r,a,o,u){try{var i=e[o](u),c=i.value}catch(s){return void t(s)}i.done?n(c):Promise.resolve(c).then(r,a)}function k(){var e,n,t=(e=["\n  && {\n    max-width: 600px;\n  }\n"],n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}})));return k=function(){return t},t}var O=(0,s.ZP)(c.Z)(k()),T=function(){var e=(0,d.useState)(null),n=e[0],t=e[1],r=(0,f.useRouter)();(0,d.useEffect)((function(){var e=E.getAttendancesForm();t(e)}),[]);var a=function(){var e,n=(e=o().mark((function e(n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){E.saveAttendancesByDay(n).then((function(n){null!==n?(r.replace("/servicos"),e("Servi\xe7o atualizado com sucesso!")):e(null)})).catch((function(){t("Ocorreu um erro. Tente novamente.")}))})));case 1:case"end":return e.stop()}}),e)})),function(){var n=this,t=arguments;return new Promise((function(r,a){var o=e.apply(n,t);function u(e){A(o,r,a,u,i,"next",e)}function i(e){A(o,r,a,u,i,"throw",e)}u(void 0)}))});return function(e){return n.apply(this,arguments)}}();return(0,u.jsx)(i.Z,{title:"Cadastro - Canto da Rua",children:(0,u.jsxs)(O,{children:[(0,u.jsx)(l.Z,{title:"Cadastro de Atendimentos"}),n&&(0,u.jsx)(p.Z,{form:n,onSubmit:a})]})})}},34486:function(e,n,t){"use strict";var r;t.d(n,{f:function(){return r}}),function(e){e[e.input=0]="input",e[e.boolean=1]="boolean",e[e.date=2]="date",e[e.select=3]="select",e[e.selectMultiple=4]="selectMultiple",e[e.number=5]="number"}(r||(r={}))}},function(e){e.O(0,[685,538,575,945,516,432,115,313,774,888,179],(function(){return n=78888,e(e.s=n);var n}));var n=e.O();_N_E=n}]);