(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[554],{8152:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/servicos/cadastro",function(){return n(1237)}])},1237:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return A}});var r,a,o=n(7297),u=n(5893),l=n(370),i=n(3832),s=n(9521),c=n(475),d=n(880),m=n(7294),p=n(4101),f=n(381),y=n(4509),b=n(4486);(r=a||(a={}))[r.Lockers=15]="Lockers",r[r.Snack=16]="Snack",r[r.FemaleRestroom=17]="FemaleRestroom",r[r.Nursing=18]="Nursing",r[r.Laundry=19]="Laundry",r[r.FemaleBath=20]="FemaleBath",r[r.MaleRestroom=22]="MaleRestroom",r[r.MaleBath=23]="MaleBath",r[r.Date=0]="Date";class h{}function g(){let e=(0,o.Z)(["\n  && {\n    max-width: 600px;\n  }\n"]);return g=function(){return e},e}h.getAttendancesForm=()=>{let e=[{label:"Atendimentos di\xe1rios",fields:[{label:"Data de refer\xeancia",property:h.AttendanceEnumToString(a.Date),value:null,type:b.f.date,dateConfig:{disableFuture:!0},rules:{required:!0}},{label:"Banheiro Feminino Banho",property:h.AttendanceEnumToString(a.FemaleBath),rules:{required:!0},type:b.f.number},{label:"Banheiro Feminino Sanit\xe1rio",property:h.AttendanceEnumToString(a.FemaleRestroom),rules:{required:!0},type:b.f.number},{label:"Banheiro Masculino Banho",property:h.AttendanceEnumToString(a.MaleBath),rules:{required:!0},type:b.f.number},{label:"Banheiro Masculino Sanit\xe1rio",property:h.AttendanceEnumToString(a.MaleRestroom),rules:{required:!0},type:b.f.number},{label:"Enfermagem",property:h.AttendanceEnumToString(a.Nursing),rules:{required:!0},type:b.f.number},{label:"Guarda Volume",property:h.AttendanceEnumToString(a.Lockers),rules:{required:!0},type:b.f.number},{label:"Lanche",property:h.AttendanceEnumToString(a.Snack),rules:{required:!0},type:b.f.number},{label:"Lavanderia",property:h.AttendanceEnumToString(a.Laundry),rules:{required:!0},type:b.f.number}]}];return{sections:e}},h.AttendanceEnumToString=e=>e.toString(),h.createAttendanceObjectToSave=(e,t,n)=>({service:parseInt(t,10),Date:e,Attendances:parseInt(n,10)}),h.saveAttendancesByDay=async e=>{let t={...e};console.log("body",t),Object.keys(t).forEach(e=>{if((0,f.isMoment)(t[e])){let n=t[e];t[e]=n.format("YYYY-MM-DD")}});let n=[];return Object.keys(t).forEach(async e=>{if(console.log("key",e),e!==h.AttendanceEnumToString(a.Date)){let r=h.createAttendanceObjectToSave(new Date(t[h.AttendanceEnumToString(a.Date)]),e,t[e]),{status:o,data:u}=await y.V0.post("service-attendances",r);if(n.push(u),200!==o)throw Error()}}),n};let S=(0,s.ZP)(i.Z).withConfig({componentId:"sc-8ea9d1f1-0"})(g()),E=()=>{let[e,t]=(0,m.useState)(null),n=(0,d.useRouter)();(0,m.useEffect)(()=>{let e=h.getAttendancesForm();t(e)},[]);let r=async e=>new Promise((t,r)=>{h.saveAttendancesByDay(e).then(e=>{null!==e?(n.replace("/servicos"),t("Servi\xe7o atualizado com sucesso!")):t(null)}).catch(()=>{r("Ocorreu um erro. Tente novamente.")})});return(0,u.jsx)(l.Z,{title:"Cadastro - Canto da Rua",children:(0,u.jsxs)(S,{children:[(0,u.jsx)(c.Z,{title:"Cadastro de Atendimentos"}),e&&(0,u.jsx)(p.Z,{form:e,onSubmit:r})]})})};var A=E},4486:function(e,t,n){"use strict";var r,a;n.d(t,{f:function(){return r}}),(a=r||(r={}))[a.input=0]="input",a[a.boolean=1]="boolean",a[a.date=2]="date",a[a.select=3]="select",a[a.selectMultiple=4]="selectMultiple",a[a.number=5]="number"}},function(e){e.O(0,[169,585,575,24,711,432,874,313,774,888,179],function(){return e(e.s=8152)}),_N_E=e.O()}]);